/**
 * @author Takahiro INOUE <takahiro.inoue@aist.go.jp>
 * @license Songle Widget API Examples
 *
 * Visit http://songle.jp/info/Credit.html OR http://widget.songle.jp/docs/v1 for documentation.
 * Copyright (c) 2015 National Institute of Advanced Industrial Science and Technology (AIST)
 *
 * Distributed under the terms of the MIT license only for non-commercial purposes.
 * http://www.opensource.org/licenses/mit-license.html
 *
 * This notice shall be included in all copies or substantial portions of this Songle Widget API Examples.
 * If you are interested in commercial use of Songle Widget API, please contact "songle-ml@aist.go.jp".
 */
(function(){if(window.__swExtra__==null){window.__swExtra__={}}__swExtra__.initializeAllModule=function(a){if(__swExtra__.modules==null){__swExtra__.modules=[]}__swExtra__.modules.push(a);window.onSongleWidgetCreate=function(c,b){return __swExtra__.initializeCreateModule(b)};window.onSongleWidgetError=function(c,b){return __swExtra__.initializeErrorModule(b)};return window.onSongleWidgetReady=function(c,b){return __swExtra__.initializeReadyModule(b)}};__swExtra__.initializeCreateModule=function(c,d){var e,g,b,f,a;if(d==null){d={}}if(d.force==null){d.force=false}f=__swExtra__.modules;a=[];for(g=0,b=f.length;g<b;g++){e=f[g];if(!e.__wasCreated__||d.force){e.onCreate&&e.onCreate(c)}a.push(e.__wasCreated__=true)}return a};__swExtra__.initializeErrorModule=function(c,d){var e,g,b,f,a;if(d==null){d={}}if(d.force==null){d.force=false}f=__swExtra__.modules;a=[];for(g=0,b=f.length;g<b;g++){e=f[g];if(!e.__wasErrored__||d.force){e.onError&&e.onError(c)}a.push(e.__wasErrored__=true)}return a};__swExtra__.initializeReadyModule=function(c,d){var e,g,b,f,a;if(d==null){d={}}if(d.force==null){d.force=false}f=__swExtra__.modules;a=[];for(g=0,b=f.length;g<b;g++){e=f[g];if(!e.__wasReadied__||d.force){e.onReady&&e.onReady(c)}a.push(e.__wasReadied__=true)}return a};__swExtra__.random=function(b,a){if(b==null){b=0}if(a==null){a=2147483647}return Math.floor(Math.random()*((a-b)+1)+b)}}).call(this);(function(){if(window.__swExtra__==null){window.__swExtra__={}}__swExtra__.searchYouTube=function(a){var b;if(a==null){a={}}if(a.key==null){a.key="AIzaSyBA9OMeI6z4ByZZf8v4H3xFxXJ893BAkiE"}if(a.maxResults==null){a.maxResults="50"}if(a.pageToken==null){a.pageToken=""}if(a.part==null){a.part="id"}if(a.q==null){a.q="AIST VocaListener"}if(a.regionCode==null){a.regionCode="JP"}if(a.type==null){a.type="video"}if(a.videoCategoryId==null){a.videoCategoryId="10"}if(a.videoDuration==null){a.videoDuration="short"}if(a.videoEmbeddable==null){a.videoEmbeddable="true"}b=$.getJSON("https://www.googleapis.com/youtube/v3/search?key="+encodeURIComponent(a.key)+"&maxResults="+encodeURIComponent(a.maxResults)+"&pageToken="+encodeURIComponent(a.pageToken)+"&part="+encodeURIComponent(a.part)+"&q="+encodeURIComponent(a.q)+"&regionCode="+encodeURIComponent(a.regionCode)+"&type="+encodeURIComponent(a.type)+"&videoCategoryId="+encodeURIComponent(a.videoCategoryId)+"&videoDuration="+encodeURIComponent(a.videoDuration)+"&videoEmbeddable="+encodeURIComponent(a.videoEmbeddable));return b.done(function(c){var e,g,d,f;a.pageToken=c.prevPageToken;a.pageToken=c.nextPageToken;f=c.items;for(g=0,d=f.length;g<d;g++){e=f[g];if(a.__urls__==null){a.__urls__=[]}a.__urls__.push("https://www.youtube.com/watch?v="+e.id.videoId)}if(a.pageToken){return __swExtra__.searchYouTube(a)}else{return a.onComplete&&a.onComplete(a.__urls__)}})};__swExtra__.startPlaylistFromRepeatSegment=function(c){var b,a;a=c.shift();b=SongleWidgetAPI.createSongleWidgetElement({api:"songle-widget-api-example"+(__swExtra__.random()),url:a,songAutoPlay:true,songAutoLoop:true,songStartAt:"chorus",onReady:function(d){var f,e;__swExtra__.initializeReadyModule(d,{force:true});f=d.song.scene.repeatSegments[0]||{duration:SongleWidgetAPI.secondsToMilliseconds(30)};e=d.song.scene.repeatSegments[1]||{duration:SongleWidgetAPI.secondsToMilliseconds(30)};if(f.duration<e.duration){setTimeout(function(){return d.remove()},f.duration)}else{setTimeout(function(){return d.remove()},e.duration)}d.on("remove",function(){return __swExtra__.startPlaylistFromRepeatSegment(c)});return d.on("finish",function(){return d.remove()})}});return document.body.appendChild(b)}}).call(this);